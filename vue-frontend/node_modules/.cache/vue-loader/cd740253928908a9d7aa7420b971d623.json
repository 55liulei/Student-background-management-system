{"remainingRequest":"/Users/liulei/Desktop/Vue/vue-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liulei/Desktop/Vue/vue-frontend/src/views/login/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liulei/Desktop/Vue/vue-frontend/src/views/login/index.vue","mtime":1658107813934},{"path":"/Users/liulei/Desktop/Vue/vue-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1657875963855},{"path":"/Users/liulei/Desktop/Vue/vue-frontend/node_modules/babel-loader/lib/index.js","mtime":1657875486856},{"path":"/Users/liulei/Desktop/Vue/vue-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1657875963855},{"path":"/Users/liulei/Desktop/Vue/vue-frontend/node_modules/vue-loader/lib/index.js","mtime":1657875961434}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiBpbXBvcnQge2xvZ2lufSBmcm9tICdAL2FwaS9sb2dpbi5qcycKIGltcG9ydCBtZW1vcnlVdGlscyBmcm9tICJAL3V0aWxzL21lbW9yeVV0aWxzIgogaW1wb3J0ICBzdG9yYWdlVXRpbHMgZnJvbSAnLi4vLi4vdXRpbHMvc3RvcmFnZVV0aWxzJwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHZhciB2YWxpZGF0YVVzZXJOYW1lID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICAgIHZhbHVlID0gdmFsdWUudHJpbSgpOwogICAgICAgIGNvbnN0IGxlbmd0aCA9IHZhbHVlICYmIHZhbHVlLmxlbmd0aDsKICAgICAgICBjb25zdCBwd2RSZWcgPSAvXlthLXpBLXowLTlfXSskLzsKICAgICAgICBpZiAodmFsdWUgPT09ICIiKSB7CiAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuivt+i+k+WFpei0puWPtyIpKTsKICAgICAgICB9IGVsc2UgaWYgKGxlbmd0aCA8IDQgfHwgbGVuZ3RoID4gMTIpIHsKICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi6ZW/5bqm5ZyoNC0xMuS4quWtl+espuS5i+mXtCIpKTsKICAgICAgICB9IGVsc2UgaWYgKCFwd2RSZWcudGVzdCh2YWx1ZSkpewogICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLotKblj7flv4XpobvnlLHoi7HmlofjgIHlrZfmr43miJbkuIvliJLnur/nu4TmiJAiKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgfQogICAgICB9OwogICAgcmV0dXJuIHsKICAgICAgZm9ybTogewogICAgICAgIHVzZXJuYW1lOiAiIiwKICAgICAgICBwYXNzd29yZDogIiIsCiAgICAgIH0sCgogICAgICBydWxlczogewogICAgICAgIHVzZXJuYW1lOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICB2YWxpZGF0b3I6IHZhbGlkYXRhVXNlck5hbWUsCiAgICAgICAgICAgIHRyaWdnZXI6IFsiYmx1ciIsICJjaGFuZ2UiXSwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgICBwYXNzd29yZDogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpeWvhueggSIsCiAgICAgICAgICAgIHRyaWdnZXI6IFsiYmx1ciIsICJjaGFuZ2UiXSwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBvblN1Ym1pdChmb3JtTmFtZSkgewogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZShhc3luYyh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgbGV0IHJlc3VsdCA9YXdhaXQgbG9naW4odGhpcy5mb3JtLnVzZXJuYW1lLCB0aGlzLmZvcm0ucGFzc3dvcmQpCiAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMuZm9ybS51c2VybmFtZSwgdGhpcy5mb3JtLnBhc3N3b3JkKTsKICAgICAgICAgIHJlc3VsdD0gcmVzdWx0LmRhdGE7CiAgICAgICAgICBpZihyZXN1bHQuc3RhdHVzPT0wKXsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgbWVzc2FnZTon55m75b2V5oiQ5YqfJywKICAgICAgICAgICAgICB0eXBlOidzdWNjZXNzJwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29uc3QgdXNlciA9IHJlc3VsdC5kYXRhCiAgICAgICAgICAgIHN0b3JhZ2VVdGlscy5zYXZlVXNlcih1c2VyKQogICAgICAgICAgICBtZW1vcnlVdGlscy51c2VyPXVzZXIKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoJy8nKQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiZXJyb3Igc3VibWl0ISIpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/login","sourcesContent":["<template>\n  <div class=\"login-container\">\n    <el-form\n      :model=\"form\"\n      status-icon\n      :rules=\"rules\"\n      ref=\"form\"\n      label-width=\"80px\"\n      class=\"login-form\"\n    >\n      <h2 class=\"login-title\">登录</h2>\n      <el-form-item label=\"账号\" prop=\"username\">\n        <el-input placeholder=\"请输入账号\" v-model=\"form.username\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"密码\" prop=\"password\">\n        <el-input\n          type=\"password\"\n          v-model=\"form.password\"\n          placeholder=\"请输入密码\"\n        ></el-input>\n      </el-form-item>\n      <el-form-item>\n        <el-button @click=\"onSubmit('form')\" type=\"primary\">登录</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\n import {login} from '@/api/login.js'\n import memoryUtils from \"@/utils/memoryUtils\"\n import  storageUtils from '../../utils/storageUtils'\nexport default {\n  data() {\n    var validataUserName = (rule, value, callback) => {\n        value = value.trim();\n        const length = value && value.length;\n        const pwdReg = /^[a-zA-z0-9_]+$/;\n        if (value === \"\") {\n          callback(new Error(\"请输入账号\"));\n        } else if (length < 4 || length > 12) {\n          callback(new Error(\"长度在4-12个字符之间\"));\n        } else if (!pwdReg.test(value)){\n          callback(new Error(\"账号必须由英文、字母或下划线组成\"));\n        } else {\n          callback();\n        }\n      };\n    return {\n      form: {\n        username: \"\",\n        password: \"\",\n      },\n\n      rules: {\n        username: [\n          {\n            required: true,\n            validator: validataUserName,\n            trigger: [\"blur\", \"change\"],\n          },\n        ],\n        password: [\n          {\n            required: true,\n            message: \"请输入密码\",\n            trigger: [\"blur\", \"change\"],\n          },\n        ],\n      },\n    };\n  },\n  methods: {\n    onSubmit(formName) {\n      this.$refs[formName].validate(async(valid) => {\n        if (valid) {\n          let result =await login(this.form.username, this.form.password)\n          //console.log(this.form.username, this.form.password);\n          result= result.data;\n          if(result.status==0){\n            this.$message({\n              message:'登录成功',\n              type:'success'\n            });\n            const user = result.data\n            storageUtils.saveUser(user)\n            memoryUtils.user=user\n            this.$router.replace('/')\n          }\n        } else {\n          console.log(\"error submit!\");\n          return false;\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.login-form {\n  width: 350px;\n  margin: 160px, auto;\n  background-color: rgba(255, 255, 255, 0.8);\n  padding: 30px;\n  border-radius: 20px;\n}\n.login-container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background: url(../../assets/tupian.webp);\n  overflow: hidden;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.login-title {\n  text-align: center;\n  color: #303133;\n}\n</style>"]}]}