{"remainingRequest":"/Users/liulei/Desktop/Vue/vue-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liulei/Desktop/Vue/vue-frontend/src/views/students/Class.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liulei/Desktop/Vue/vue-frontend/src/views/students/Class.vue","mtime":1658734717309},{"path":"/Users/liulei/Desktop/Vue/vue-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1657875963855},{"path":"/Users/liulei/Desktop/Vue/vue-frontend/node_modules/babel-loader/lib/index.js","mtime":1657875486856},{"path":"/Users/liulei/Desktop/Vue/vue-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1657875963855},{"path":"/Users/liulei/Desktop/Vue/vue-frontend/node_modules/vue-loader/lib/index.js","mtime":1657875961434}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBjbGFzc0FwaSBmcm9tICJAL2FwaS9jbGFzc3MuanMiOwppbXBvcnQgdXNlckFwaSBmcm9tICJAL2FwaS91c2VyLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgdG90YWw6IDAsCiAgICAgIHBhZ2VTaXplOiA1LAogICAgICBjbGFzc3M6IFtdLAogICAgICB1c2VyQWxsOiBbXSwKICAgICAgc2VhcmNoOiB7CiAgICAgICAgdGVhY2hlcjogIiIsCiAgICAgICAgbWFuYWdlcjogIiIsCiAgICAgIH0sCiAgICAgIHNlYXJjaE1hcDogewogICAgICAgIHRlYWNoZXJfaWQ6ICIiLAogICAgICAgIG1hbmFnZXJfaWQ6ICIiLAogICAgICB9LAogICAgICB0ZWFjaGVyT3B0aW9uczogW10sCiAgICAgIG1hbmFnZXJPcHRpb25zOiBbXSwKICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLAogICAgICBydWxlczogewogICAgICAgIG5hbWU6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLnj63nuqflkI3np7Dlv4XpobvloavlhpkiLCB0cmlnZ2VyOiAiYmx1ciIgfSwKICAgICAgICBdLAogICAgICAgIHRlYWNoZXJfaWQ6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fpgInmi6nmlZnluIgiLCB0cmlnZ2VyOiAiYmx1ciIgfSwKICAgICAgICBdLAogICAgICAgIG1hbmFnZXJfaWQ6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fpgInmi6nlrabnrqEiLCB0cmlnZ2VyOiAiYmx1ciIgfSwKICAgICAgICBdLAogICAgICB9LAogICAgICB1cGRhdGVDbGFzczogewogICAgICAgIF9pZDogbnVsbCwKICAgICAgICBuYW1lOiAiIiwKICAgICAgICB0ZWFjaGVyX2lkOiAiIiwKICAgICAgICBtYW5hZ2VyX2lkOiAiIiwKICAgICAgfSwKICAgIH07CiAgfSwKCiAgY29tcG9uZW50czoge30sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZmV0Y2hDbGFzcygpOwogICAgdGhpcy5nZXRVc2VyTGlzdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgcmVzZXRGb3JtKGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnJlc2V0RmllbGRzKCk7CiAgICAgIAogICAgfSwKICAgIHNlYXJjaERhdGEoKSB7CiAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSAxOwogICAgICBjb25zdCByZXNUZWFjaGVyID0KICAgICAgICB0aGlzLnVzZXJBbGwuZmluZCgoaXRlbSkgPT4gaXRlbS5uYW1lID09PSB0aGlzLnNlYXJjaC50ZWFjaGVyKSB8fCB7fTsKICAgICAgY29uc3QgcmVzTWFuYWdlciA9CiAgICAgICAgdGhpcy51c2VyQWxsLmZpbmQoKGl0ZW0pID0+IGl0ZW0ubmFtZSA9PT0gdGhpcy5zZWFyY2gubWFuYWdlcikgfHwge307CiAgICAgIHRoaXMuc2VhcmNoTWFwLnRlYWNoZXJfaWQgPSByZXNUZWFjaGVyLl9pZCB8fCAiIjsKICAgICAgdGhpcy5zZWFyY2hNYXAubWFuYWdlcl9pZCA9IHJlc01hbmFnZXIuX2lkIHx8ICIiOwogICAgICB0aGlzLmZldGNoQ2xhc3MoKTsKICAgIH0sCiAgICBmZXRjaENsYXNzKCkgewogICAgICBpZih0aGlzLmN1cnJlbnRQYWdlID4gTWF0aC5jZWlsKHRoaXMudG90YWxQYWdlKSl7CiAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IE1hdGguY2VpbCh0aGlzLnRvdGFsUGFnZSkKICAgICAgfQogICAgICBjbGFzc0FwaQogICAgICAgIC5nZXRDbGFzc0xpc3QodGhpcy5jdXJyZW50UGFnZSwgdGhpcy5wYWdlU2l6ZSwgdGhpcy5zZWFyY2hNYXApCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBjb25zdCByZXMgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT0gMCkgewogICAgICAgICAgICB0aGlzLmNsYXNzcyA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICAgIHRoaXMudG90YWwgPSByZXMuZGF0YS50b3RhbDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCiAgICBnZXRVc2VyTGlzdCgpIHsKICAgICAgdXNlckFwaS5nZXRVc2VyQWxsKCkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICBjb25zdCByZXMgPSByZXNwb25zZS5kYXRhOwogICAgICAgIGlmIChyZXMuc3RhdHVzID09IDApIHsKICAgICAgICAgIHRoaXMudXNlckFsbCA9IHJlcy5kYXRhOwogICAgICAgICAgdGhpcy51c2VyQWxsLmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICAgICAgaWYgKGl0ZW0ucm9sZV9pZCA9PT0gIjYyZGEwZmY0M2QzMDNiNTAxZDQwNDRjYSIpIHsKICAgICAgICAgICAgICB0aGlzLnRlYWNoZXJPcHRpb25zLnB1c2goaXRlbSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICAgICAgaXRlbS5yb2xlX2lkID09PSAiNjJkNjdlMjNhYzI3YjEzYTBlOGJkMmU3IiB8fAogICAgICAgICAgICAgICI2MmRhMTk2OTNkMzAzYjUwMWQ0MDQ1OGEiCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIHRoaXMubWFuYWdlck9wdGlvbnMucHVzaChpdGVtKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBmb3JtYXRUZWFjaGVyKHJvdywgY29sdW1uLCBjZWxsVmFsdWUsIGluZGV4KSB7CiAgICAgIGNvbnN0IHRlYWNoZXIgPSB0aGlzLnVzZXJBbGwuZmluZCgoaXRlbSkgPT4gaXRlbS5faWQgPT09IGNlbGxWYWx1ZSkgfHwge307CiAgICAgIHJldHVybiB0ZWFjaGVyLm5hbWU7CiAgICB9LAogICAgZm9ybWF0TWFuYWdlcihyb3csIGNvbHVtbiwgY2VsbFZhbHVlLCBpbmRleCkgewogICAgICBjb25zdCBtYW5hZ2VyID0gdGhpcy51c2VyQWxsLmZpbmQoKGl0ZW0pID0+IGl0ZW0uX2lkID09PSBjZWxsVmFsdWUpIHx8IHt9OwogICAgICByZXR1cm4gbWFuYWdlci5uYW1lOwogICAgfSwKICAgIGhhbmRsZUVkaXQoX2lkKSB7CiAgICAgIHRoaXMuaGFuZGxlQWRkKCk7CiAgICAgIGNsYXNzQXBpLmdldENsYXNzQnlJZChfaWQpLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgY29uc3QgcmVzcCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgaWYgKHJlc3Auc3RhdHVzID09IDApIHsKICAgICAgICAgIHRoaXMudXBkYXRlQ2xhc3MgPSByZXNwLmRhdGE7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVEZWxldGUoX2lkKSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oIuehruiupOWIoOmZpOivpeePree6p+WQl++8nyIsICLmj5DnpLoiLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiLAogICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgfSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICBjbGFzc0FwaS5kZWxldGVDbGFzc0J5SWQoX2lkKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICBjb25zdCByZXNwID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgaWYgKHJlc3Auc3RhdHVzID09IDApIHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLliKDpmaTnj63nuqfmiJDlip8hIiwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB0aGlzLnRvdGFsUGFnZSA9ICh0aGlzLnRvdGFsIC0gMSkgLyB0aGlzLnBhZ2VTaXplOwogICAgICAgICAgICAgIHRoaXMuZmV0Y2hDbGFzcygpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7fSk7CiAgICB9LAogICAgaGFuZGxlU2l6ZUNoYW5nZSh2YWwpIHsKICAgICAgIHRoaXMucGFnZVNpemU9dmFsCiAgICAgIHRoaXMuZmV0Y2hDbGFzcygpOwogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMuY3VycmVudFBhZ2U9dmFsCiAgICAgIHRoaXMuZmV0Y2hDbGFzcygpOwogICAgfSwKICAgIGFkZERhdGEoZm9ybU5hbWUpIHsKICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBjbGFzc0FwaS5hZGRDbGFzcyh0aGlzLnVwZGF0ZUNsYXNzKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICBjb25zdCByZXNwID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgaWYgKHJlc3Auc3RhdHVzID09IDApIHsKICAgICAgICAgICAgICB0aGlzLmZldGNoQ2xhc3MoKTsKICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVBZGQoKSB7CiAgICAgIHRoaXMudXBkYXRlQ2xhc3MgPSB7CiAgICAgICAgX2lkOiBudWxsLAogICAgICAgIG5hbWU6ICIiLAogICAgICAgIHRlYWNoZXJfaWQ6ICIiLAogICAgICAgIG1hbmFnZXJfaWQ6ICIiLAogICAgICAgIHN0YWdlOiAiIiwKICAgICAgfTsKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWU7CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLiRyZWZzWyJjbGFzc0Zvcm0iXS5yZXNldEZpZWxkcygpOwogICAgICB9KTsKICAgIH0sCiAgICB1cGRhdGVEYXRhKGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgY2xhc3NBcGkudXBkYXRlQ2xhc3ModGhpcy51cGRhdGVDbGFzcykudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgY29uc3QgcmVzcCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgIGlmIChyZXNwLnN0YXR1cyA9PSAwKSB7CiAgICAgICAgICAgICAgdGhpcy5mZXRjaENsYXNzKCk7CiAgICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Class.vue"],"names":[],"mappings":";AAqIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Class.vue","sourceRoot":"src/views/students","sourcesContent":["<template>\n  <div>\n    <el-form\n      :inline=\"true\"\n      :model=\"search\"\n      ref=\"searchForm\"\n      style=\"margin: 20px\"\n    >\n      <el-form-item prop=\"teacher\">\n        <el-input\n          v-model=\"search.teacher\"\n          placeholder=\"根据教师查询\"\n          style=\"width: 200px\"\n        ></el-input>\n      </el-form-item>\n      <el-form-item prop=\"manager\">\n        <el-input\n          v-model=\"search.manager\"\n          placeholder=\"根据学管查询\"\n          style=\"width: 200px\"\n        ></el-input>\n      </el-form-item>\n\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"searchData\" icon=\"el-icon-search\"\n          >查询</el-button\n        >\n        <el-button type=\"primary\" @click=\"handleAdd\" icon=\"el-icon-edit\"\n          >新增</el-button\n        >\n        <el-button type=\"primary\" @click=\"resetForm('searchForm')\"\n          >重置</el-button\n        >\n      </el-form-item>\n    </el-form>\n\n    <el-table :data=\"classs\" height=\"380\" border style=\"width: 100%\">\n      <el-table-column label=\"序号\" type=\"index\" width=\"60\"></el-table-column>\n      <el-table-column label=\"班级名称\" prop=\"name\"></el-table-column>\n      <el-table-column\n        label=\"授课教师\"\n        prop=\"teacher_id\"\n        :formatter=\"formatTeacher\"\n      ></el-table-column>\n      <el-table-column\n        label=\"学管\"\n        prop=\"manager_id\"\n        :formatter=\"formatManager\"\n      ></el-table-column>\n      <el-table-column label=\"操作\" width=\"250\">\n        <template slot-scope=\"scope\">\n          <el-button size=\"mini\" @click=\"handleEdit(scope.row._id)\"\n            >编辑</el-button\n          >\n          <el-button\n            size=\"mini\"\n            type=\"danger\"\n            @click=\"handleDelete(scope.row._id)\"\n            >删除</el-button\n          >\n        </template>\n      </el-table-column>\n    </el-table>\n    <div>\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"currentPage\"\n        :page-sizes=\"[5, 10, 15, 20]\"\n        :page-size=\"pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"total\"\n      >\n      </el-pagination>\n    </div>\n    <el-dialog title=\"教师编辑\" :visible.sync=\"dialogFormVisible\" width=\"500px\">\n      <el-form\n        :model=\"updateClass\"\n        status-icon\n        ref=\"classForm\"\n        label-width=\"100px\"\n        label-position=\"right\"\n        style=\"width: 400px\"\n        :rules=\"rules\"\n      >\n        <el-form-item label=\"班级名称\" prop=\"name\">\n          <el-input v-model=\"updateClass.name\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"授课教师\" prop=\"teacher_id\">\n          <el-select\n            v-model=\"updateClass.teacher_id\"\n            placeholder=\"请点击选择\"\n            class=\"filter-item\"\n          >\n            <el-option\n              v-for=\"option in teacherOptions\"\n              :key=\"option._id\"\n              :label=\"option.name\"\n              :value=\"option._id\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"学管\" prop=\"manager_id\">\n          <el-select\n            v-model=\"updateClass.manager_id\"\n            placeholder=\"请点击选择\"\n            class=\"filter-item\"\n          >\n            <el-option\n              v-for=\"option in managerOptions\"\n              :key=\"option._id\"\n              :label=\"option.name\"\n              :value=\"option._id\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n        <el-button\n          type=\"primary\"\n          @click=\"\n            updateClass._id === null\n              ? addData('classForm')\n              : updateData('classForm')\n          \"\n          >确 定</el-button\n        >\n      </div>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport classApi from \"@/api/classs.js\";\nimport userApi from \"@/api/user.js\";\nexport default {\n  data() {\n    return {\n      currentPage: 1,\n      total: 0,\n      pageSize: 5,\n      classs: [],\n      userAll: [],\n      search: {\n        teacher: \"\",\n        manager: \"\",\n      },\n      searchMap: {\n        teacher_id: \"\",\n        manager_id: \"\",\n      },\n      teacherOptions: [],\n      managerOptions: [],\n      dialogFormVisible: false,\n      rules: {\n        name: [\n          { required: true, message: \"班级名称必须填写\", trigger: \"blur\" },\n        ],\n        teacher_id: [\n          { required: true, message: \"请选择教师\", trigger: \"blur\" },\n        ],\n        manager_id: [\n          { required: true, message: \"请选择学管\", trigger: \"blur\" },\n        ],\n      },\n      updateClass: {\n        _id: null,\n        name: \"\",\n        teacher_id: \"\",\n        manager_id: \"\",\n      },\n    };\n  },\n\n  components: {},\n  mounted() {\n    this.fetchClass();\n    this.getUserList();\n  },\n  methods: {\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n      \n    },\n    searchData() {\n      this.currentPage = 1;\n      const resTeacher =\n        this.userAll.find((item) => item.name === this.search.teacher) || {};\n      const resManager =\n        this.userAll.find((item) => item.name === this.search.manager) || {};\n      this.searchMap.teacher_id = resTeacher._id || \"\";\n      this.searchMap.manager_id = resManager._id || \"\";\n      this.fetchClass();\n    },\n    fetchClass() {\n      if(this.currentPage > Math.ceil(this.totalPage)){\n        this.currentPage = Math.ceil(this.totalPage)\n      }\n      classApi\n        .getClassList(this.currentPage, this.pageSize, this.searchMap)\n        .then((response) => {\n          const res = response.data;\n          if (res.status == 0) {\n            this.classs = res.data.data;\n            this.total = res.data.total;\n          }\n        });\n    },\n    getUserList() {\n      userApi.getUserAll().then((response) => {\n        const res = response.data;\n        if (res.status == 0) {\n          this.userAll = res.data;\n          this.userAll.forEach((item) => {\n            if (item.role_id === \"62da0ff43d303b501d4044ca\") {\n              this.teacherOptions.push(item);\n            } else if (\n              item.role_id === \"62d67e23ac27b13a0e8bd2e7\" ||\n              \"62da19693d303b501d40458a\"\n            ) {\n              this.managerOptions.push(item);\n            }\n          });\n        }\n      });\n    },\n    formatTeacher(row, column, cellValue, index) {\n      const teacher = this.userAll.find((item) => item._id === cellValue) || {};\n      return teacher.name;\n    },\n    formatManager(row, column, cellValue, index) {\n      const manager = this.userAll.find((item) => item._id === cellValue) || {};\n      return manager.name;\n    },\n    handleEdit(_id) {\n      this.handleAdd();\n      classApi.getClassById(_id).then((response) => {\n        const resp = response.data;\n        if (resp.status == 0) {\n          this.updateClass = resp.data;\n        }\n      });\n    },\n    handleDelete(_id) {\n      this.$confirm(\"确认删除该班级吗？\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      })\n        .then(() => {\n          classApi.deleteClassById(_id).then((response) => {\n            const resp = response.data;\n            if (resp.status == 0) {\n              this.$message({\n                type: \"success\",\n                message: \"删除班级成功!\",\n              });\n              this.totalPage = (this.total - 1) / this.pageSize;\n              this.fetchClass();\n            }\n          });\n        })\n        .catch(() => {});\n    },\n    handleSizeChange(val) {\n       this.pageSize=val\n      this.fetchClass();\n    },\n    handleCurrentChange(val) {\n      this.currentPage=val\n      this.fetchClass();\n    },\n    addData(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          classApi.addClass(this.updateClass).then((response) => {\n            const resp = response.data;\n            if (resp.status == 0) {\n              this.fetchClass();\n              this.dialogFormVisible = false;\n            }\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    handleAdd() {\n      this.updateClass = {\n        _id: null,\n        name: \"\",\n        teacher_id: \"\",\n        manager_id: \"\",\n        stage: \"\",\n      };\n      this.dialogFormVisible = true;\n      this.$nextTick(() => {\n        this.$refs[\"classForm\"].resetFields();\n      });\n    },\n    updateData(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          classApi.updateClass(this.updateClass).then((response) => {\n            const resp = response.data;\n            if (resp.status == 0) {\n              this.fetchClass();\n              this.dialogFormVisible = false;\n            }\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n</style>"]}]}