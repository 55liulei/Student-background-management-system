{"remainingRequest":"/Users/liulei/Desktop/Vue/vue-frontend/node_modules/babel-loader/lib/index.js!/Users/liulei/Desktop/Vue/vue-frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/liulei/Desktop/Vue/vue-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liulei/Desktop/Vue/vue-frontend/src/views/role/Auth.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liulei/Desktop/Vue/vue-frontend/src/views/role/Auth.vue","mtime":1658478192512},{"path":"/Users/liulei/Desktop/Vue/vue-frontend/babel.config.js","mtime":1658195622849},{"path":"/Users/liulei/Desktop/Vue/vue-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1657875963855},{"path":"/Users/liulei/Desktop/Vue/vue-frontend/node_modules/babel-loader/lib/index.js","mtime":1657875486856},{"path":"/Users/liulei/Desktop/Vue/vue-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1657875963855},{"path":"/Users/liulei/Desktop/Vue/vue-frontend/node_modules/vue-loader/lib/index.js","mtime":1657875961434}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IG1lbnVMaXN0IGZyb20gIkAvY29uZmlnL21lbnVDb25maWcuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJ1bGVzOiB7CiAgICAgICAgbmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpeinkuiJsuWQjeensCIsCiAgICAgICAgICB0cmlnZ2VyOiBbImJsdXIiLCAiY2hhbmdlIl0KICAgICAgICB9XQogICAgICB9LAogICAgICB1cGRhdGVSb2xlOiB7fSwKICAgICAgLy/opoHkv67mlLnlkI7nmoTop5LoibLlr7nosaEKICAgICAgYXV0aExpc3Q6IFtdLAogICAgICAvL+adg+mZkOWIl+ihqAogICAgICBjaGVja2VkS2V5czogW10gLy/moJHlvaLnqbrku7bpgInkuK3pobnmlbDnu4QKCiAgICB9OwogIH0sCgogIHByb3BzOiBbInJvbGUiXSwKCiAgbW91bnRlZCgpIHsKICAgIHRoaXMudXBkYXRlUm9sZSA9IHsgLi4udGhpcy5yb2xlCiAgICB9OwogICAgdGhpcy5hdXRoTGlzdCA9IHRoaXMuZ2V0QXV0aE5vZGVzKG1lbnVMaXN0KTsKICAgIHRoaXMuY2hlY2tlZEtleXMgPSB0aGlzLnJvbGUubWVudXM7CiAgfSwKCiAgd2F0Y2g6IHsKICAgIHJvbGUodmFsKSB7CiAgICAgIGlmICh2YWwpIHsKICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICB0aGlzLnVwZGF0ZVJvbGUgPSB7IC4uLnZhbAogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMuY2hlY2tlZEtleXMgPSB2YWwubWVudXM7CiAgICAgICAgICB0aGlzLiRyZWZzWyJ0cmVlIl0uc2V0Q2hlY2tlZEtleXModGhpcy5jaGVja2VkS2V5cyk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KCiAgfSwKICBjb21wb25lbnRzOiB7fSwKICBtZXRob2RzOiB7CiAgICBnZXRBdXRoTm9kZXMobWVudUxpc3QpIHsKICAgICAgcmV0dXJuIG1lbnVMaXN0Lm1hcChpdGVtID0+IHsKICAgICAgICBpZiAoIWl0ZW0uY2hpbGRyZW4pIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGluZGV4OiBpdGVtLmluZGV4LAogICAgICAgICAgICBsYWJlbDogaXRlbS50aXRsZQogICAgICAgICAgfTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaW5kZXg6IGl0ZW0uaW5kZXgsCiAgICAgICAgICAgIGxhYmVsOiBpdGVtLnRpdGxlLAogICAgICAgICAgICBjaGlsZHJlbjogdGhpcy5nZXRBdXRoTm9kZXMoaXRlbS5jaGlsZHJlbikKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgLy/moJHlvaLnqbrpl7ToioLngrkg54K55Ye75Zue6LCDCiAgICAvLyBkYXRhIOW9k+WJjeeCueWHu+iKgueCueaVsOaNriAgY2hlY2tlZCAg6IqC54K55piv5ZCm6KKr6YCJ5LitICBpbmRldGVybWFpbmF0ZSDlvZPliY3oioLngrnnmoTlrZDoioLngrnmmK/lkKbmnInpgInkuK3nirbmgIEKICAgIGhhbmRsZUNoZWNrQ2hhbmdlKGRhdGEsIGNoZWNrZWQsIGluZGV0ZXJtaW5hdGUpIHsKICAgICAgaWYgKGNoZWNrZWQpIHsKICAgICAgICB0aGlzLmNoZWNrZWRLZXlzLnB1c2goZGF0YS5pbmRleCk7CiAgICAgICAgbGV0IHNldCA9IG5ldyBTZXQodGhpcy5jaGVja2VkS2V5cyk7CiAgICAgICAgdGhpcy5jaGVja2VkS2V5cyA9IEFycmF5LmZyb20oc2V0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodGhpcy5jaGVja2VkS2V5cy5pbmRleE9mKGRhdGEuaW5kZXgpICE9IC0xKSB7CiAgICAgICAgICB0aGlzLmNoZWNrZWRLZXlzLnNwbGljZSh0aGlzLmNoZWNrZWRLZXlzLmluZGV4T2YoZGF0YS5pbmRleCksIDEpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBnZXRNZW51cygpIHsKICAgICAgdGhpcy51cGRhdGVSb2xlLm1lbnVzID0gdGhpcy5jaGVja2VkS2V5czsKICAgICAgcmV0dXJuIHRoaXMudXBkYXRlUm9sZTsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"mappings":"AA6BA;AACA;EACAA;IACA;MACAC;QACAC,OACA;UACAC,cADA;UAEAC,kBAFA;UAGAC;QAHA,CADA;MADA,CADA;MAUAC,cAVA;MAUA;MACAC,YAXA;MAWA;MACAC,eAZA,CAYA;;IAZA;EAcA,CAhBA;;EAiBAC,eAjBA;;EAkBAC;IACA;IAAA;IACA;IACA;EACA,CAtBA;;EAuBAC;IACAC;MACA;QACA;UACA;UAAA;UACA;UACA;QACA,CAJA;MAKA;IACA;;EATA,CAvBA;EAkCAC,cAlCA;EAoCAC;IACAC;MACA;QACA;UACA;YACAC,iBADA;YAEAC;UAFA;QAIA,CALA,MAKA;UACA;YACAD,iBADA;YAEAC,iBAFA;YAGAC;UAHA;QAKA;MACA,CAbA;IAcA,CAhBA;;IAiBA;IACA;IACAC;MACA;QACA;QACA;QACA;MACA,CAJA,MAIA;QACA;UACA;QACA;MACA;IACA,CA7BA;;IA8BAC;MACA;MACA;IACA;;EAjCA;AApCA","names":["data","rules","name","required","message","trigger","updateRole","authList","checkedKeys","props","mounted","watch","role","components","methods","getAuthNodes","index","label","children","handleCheckChange","getMenus"],"sourceRoot":"src/views/role","sources":["Auth.vue"],"sourcesContent":["<template>\n  <div>\n    <el-form\n      status-icon\n      ref=\"roleForm\"\n      :model=\"updateRole\"\n      label-width=\"100px\"\n      label-position=\"right\"\n      style=\"width: 400px\"\n      :rules=\"rules\"\n    >\n      <el-form-item label=\"角色名称\" prop=\"name\">\n        <el-input v-model=\"updateRole.name\" placeholder=\"请输入角色名称\" />\n      </el-form-item>\n    </el-form>\n    <el-tree\n      :data=\"authList\"\n      show-checkbox\n      node-key=\"index\"\n      :default-expand-all=\"true\"\n      :default-checked-keys=\"checkedKeys\"\n      @check-change=\"handleCheckChange\"\n      ref=\"tree\"\n    >\n    </el-tree>\n  </div>\n</template>\n\n<script>\nimport menuList from \"@/config/menuConfig.js\";\nexport default {\n  data() {\n    return {\n      rules: {\n        name: [\n          {\n            required: true,\n            message: \"请输入角色名称\",\n            trigger: [\"blur\", \"change\"],\n          },\n        ],\n      },\n      updateRole: {}, //要修改后的角色对象\n      authList: [], //权限列表\n      checkedKeys: [], //树形空件选中项数组\n    };\n  },\n  props: [\"role\"],\n  mounted() {\n    this.updateRole = { ...this.role };\n    this.authList = this.getAuthNodes(menuList);\n    this.checkedKeys = this.role.menus;\n  },\n  watch: {\n    role(val) {\n      if (val) {\n        this.$nextTick(() => {\n          this.updateRole = { ...val };\n          this.checkedKeys = val.menus;\n          this.$refs[\"tree\"].setCheckedKeys(this.checkedKeys);\n        });\n      }\n    },\n  },\n  components: {},\n\n  methods: {\n    getAuthNodes(menuList) {\n      return menuList.map((item) => {\n        if (!item.children) {\n          return {\n            index: item.index,\n            label: item.title,\n          };\n        } else {\n          return {\n            index: item.index,\n            label: item.title,\n            children: this.getAuthNodes(item.children),\n          };\n        }\n      });\n    },\n    //树形空间节点 点击回调\n    // data 当前点击节点数据  checked  节点是否被选中  indetermainate 当前节点的子节点是否有选中状态\n    handleCheckChange(data, checked, indeterminate) {\n      if (checked) {\n        this.checkedKeys.push(data.index);\n        let set = new Set(this.checkedKeys);\n        this.checkedKeys = Array.from(set);\n      } else {\n        if (this.checkedKeys.indexOf(data.index) != -1) {\n          this.checkedKeys.splice(this.checkedKeys.indexOf(data.index), 1);\n        }\n      }\n    },\n    getMenus() {\n      this.updateRole.menus = this.checkedKeys;\n      return this.updateRole;\n    },\n  },\n};\n</script>\n\n<style scoped>\n</style>"]}]}