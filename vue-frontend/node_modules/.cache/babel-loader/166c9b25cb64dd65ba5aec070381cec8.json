{"remainingRequest":"/Users/liulei/Desktop/Vue/vue-frontend/node_modules/babel-loader/lib/index.js!/Users/liulei/Desktop/Vue/vue-frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/liulei/Desktop/Vue/vue-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liulei/Desktop/Vue/vue-frontend/src/views/login/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liulei/Desktop/Vue/vue-frontend/src/views/login/index.vue","mtime":1658107813934},{"path":"/Users/liulei/Desktop/Vue/vue-frontend/babel.config.js","mtime":1657875669496},{"path":"/Users/liulei/Desktop/Vue/vue-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1657875963855},{"path":"/Users/liulei/Desktop/Vue/vue-frontend/node_modules/babel-loader/lib/index.js","mtime":1657875486856},{"path":"/Users/liulei/Desktop/Vue/vue-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1657875963855},{"path":"/Users/liulei/Desktop/Vue/vue-frontend/node_modules/vue-loader/lib/index.js","mtime":1657875961434}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgeyBsb2dpbiB9IGZyb20gJ0AvYXBpL2xvZ2luLmpzJzsKaW1wb3J0IG1lbW9yeVV0aWxzIGZyb20gIkAvdXRpbHMvbWVtb3J5VXRpbHMiOwppbXBvcnQgc3RvcmFnZVV0aWxzIGZyb20gJy4uLy4uL3V0aWxzL3N0b3JhZ2VVdGlscyc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgdmFyIHZhbGlkYXRhVXNlck5hbWUgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgIHZhbHVlID0gdmFsdWUudHJpbSgpOwogICAgICBjb25zdCBsZW5ndGggPSB2YWx1ZSAmJiB2YWx1ZS5sZW5ndGg7CiAgICAgIGNvbnN0IHB3ZFJlZyA9IC9eW2EtekEtejAtOV9dKyQvOwoKICAgICAgaWYgKHZhbHVlID09PSAiIikgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi6K+36L6T5YWl6LSm5Y+3IikpOwogICAgICB9IGVsc2UgaWYgKGxlbmd0aCA8IDQgfHwgbGVuZ3RoID4gMTIpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIumVv+W6puWcqDQtMTLkuKrlrZfnrKbkuYvpl7QiKSk7CiAgICAgIH0gZWxzZSBpZiAoIXB3ZFJlZy50ZXN0KHZhbHVlKSkgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi6LSm5Y+35b+F6aG755Sx6Iux5paH44CB5a2X5q+N5oiW5LiL5YiS57q/57uE5oiQIikpOwogICAgICB9IGVsc2UgewogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0KICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgZm9ybTogewogICAgICAgIHVzZXJuYW1lOiAiIiwKICAgICAgICBwYXNzd29yZDogIiIKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICB1c2VybmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0YVVzZXJOYW1lLAogICAgICAgICAgdHJpZ2dlcjogWyJibHVyIiwgImNoYW5nZSJdCiAgICAgICAgfV0sCiAgICAgICAgcGFzc3dvcmQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXlr4bnoIEiLAogICAgICAgICAgdHJpZ2dlcjogWyJibHVyIiwgImNoYW5nZSJdCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBvblN1Ym1pdChmb3JtTmFtZSkgewogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZShhc3luYyB2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgbG9naW4odGhpcy5mb3JtLnVzZXJuYW1lLCB0aGlzLmZvcm0ucGFzc3dvcmQpOyAvL2NvbnNvbGUubG9nKHRoaXMuZm9ybS51c2VybmFtZSwgdGhpcy5mb3JtLnBhc3N3b3JkKTsKCiAgICAgICAgICByZXN1bHQgPSByZXN1bHQuZGF0YTsKCiAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PSAwKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIG1lc3NhZ2U6ICfnmbvlvZXmiJDlip8nLAogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29uc3QgdXNlciA9IHJlc3VsdC5kYXRhOwogICAgICAgICAgICBzdG9yYWdlVXRpbHMuc2F2ZVVzZXIodXNlcik7CiAgICAgICAgICAgIG1lbW9yeVV0aWxzLnVzZXIgPSB1c2VyOwogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSgnLycpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiZXJyb3Igc3VibWl0ISIpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogIH0KfTs="},{"version":3,"mappings":";AA6BA;AACA;AACA;AACA;EACAA;IACA;MACAC;MACA;MACA;;MACA;QACAC;MACA,CAFA,MAEA;QACAA;MACA,CAFA,MAEA;QACAA;MACA,CAFA,MAEA;QACAA;MACA;IACA,CAbA;;IAcA;MACAC;QACAC,YADA;QAEAC;MAFA,CADA;MAMAC;QACAF,WACA;UACAG,cADA;UAEAC,2BAFA;UAGAC;QAHA,CADA,CADA;QAQAJ,WACA;UACAE,cADA;UAEAG,gBAFA;UAGAD;QAHA,CADA;MARA;IANA;EAuBA,CAvCA;;EAwCAE;IACAC;MACA;QACA;UACA,iEADA,CAEA;;UACAC;;UACA;YACA;cACAH,eADA;cAEAI;YAFA;YAIA;YACAC;YACAC;YACA;UACA;QACA,CAdA,MAcA;UACAC;UACA;QACA;MACA,CAnBA;IAoBA;;EAtBA;AAxCA","names":["data","value","callback","form","username","password","rules","required","validator","trigger","message","methods","onSubmit","result","type","storageUtils","memoryUtils","console"],"sourceRoot":"src/views/login","sources":["index.vue"],"sourcesContent":["<template>\n  <div class=\"login-container\">\n    <el-form\n      :model=\"form\"\n      status-icon\n      :rules=\"rules\"\n      ref=\"form\"\n      label-width=\"80px\"\n      class=\"login-form\"\n    >\n      <h2 class=\"login-title\">登录</h2>\n      <el-form-item label=\"账号\" prop=\"username\">\n        <el-input placeholder=\"请输入账号\" v-model=\"form.username\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"密码\" prop=\"password\">\n        <el-input\n          type=\"password\"\n          v-model=\"form.password\"\n          placeholder=\"请输入密码\"\n        ></el-input>\n      </el-form-item>\n      <el-form-item>\n        <el-button @click=\"onSubmit('form')\" type=\"primary\">登录</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\n import {login} from '@/api/login.js'\n import memoryUtils from \"@/utils/memoryUtils\"\n import  storageUtils from '../../utils/storageUtils'\nexport default {\n  data() {\n    var validataUserName = (rule, value, callback) => {\n        value = value.trim();\n        const length = value && value.length;\n        const pwdReg = /^[a-zA-z0-9_]+$/;\n        if (value === \"\") {\n          callback(new Error(\"请输入账号\"));\n        } else if (length < 4 || length > 12) {\n          callback(new Error(\"长度在4-12个字符之间\"));\n        } else if (!pwdReg.test(value)){\n          callback(new Error(\"账号必须由英文、字母或下划线组成\"));\n        } else {\n          callback();\n        }\n      };\n    return {\n      form: {\n        username: \"\",\n        password: \"\",\n      },\n\n      rules: {\n        username: [\n          {\n            required: true,\n            validator: validataUserName,\n            trigger: [\"blur\", \"change\"],\n          },\n        ],\n        password: [\n          {\n            required: true,\n            message: \"请输入密码\",\n            trigger: [\"blur\", \"change\"],\n          },\n        ],\n      },\n    };\n  },\n  methods: {\n    onSubmit(formName) {\n      this.$refs[formName].validate(async(valid) => {\n        if (valid) {\n          let result =await login(this.form.username, this.form.password)\n          //console.log(this.form.username, this.form.password);\n          result= result.data;\n          if(result.status==0){\n            this.$message({\n              message:'登录成功',\n              type:'success'\n            });\n            const user = result.data\n            storageUtils.saveUser(user)\n            memoryUtils.user=user\n            this.$router.replace('/')\n          }\n        } else {\n          console.log(\"error submit!\");\n          return false;\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.login-form {\n  width: 350px;\n  margin: 160px, auto;\n  background-color: rgba(255, 255, 255, 0.8);\n  padding: 30px;\n  border-radius: 20px;\n}\n.login-container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background: url(../../assets/tupian.webp);\n  overflow: hidden;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.login-title {\n  text-align: center;\n  color: #303133;\n}\n</style>"]}]}