{"remainingRequest":"/Users/liulei/Desktop/Vue/vue-frontend/node_modules/babel-loader/lib/index.js!/Users/liulei/Desktop/Vue/vue-frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/liulei/Desktop/Vue/vue-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liulei/Desktop/Vue/vue-frontend/src/views/students/StudentUpdate.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liulei/Desktop/Vue/vue-frontend/src/views/students/StudentUpdate.vue","mtime":1658978671841},{"path":"/Users/liulei/Desktop/Vue/vue-frontend/babel.config.js","mtime":1658195622849},{"path":"/Users/liulei/Desktop/Vue/vue-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1657875963855},{"path":"/Users/liulei/Desktop/Vue/vue-frontend/node_modules/babel-loader/lib/index.js","mtime":1657875486856},{"path":"/Users/liulei/Desktop/Vue/vue-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1657875963855},{"path":"/Users/liulei/Desktop/Vue/vue-frontend/node_modules/vue-loader/lib/index.js","mtime":1657875961434}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgc3R1ZGVudEFwaSBmcm9tICJAL2FwaS9zdHVkZW50LmpzIjsKaW1wb3J0IHVzZXJBcGkgZnJvbSAiQC9hcGkvdXNlci5qcyI7CmltcG9ydCBjbGFzc0FwaSBmcm9tICJAL2FwaS9jbGFzc3MuanMiOwppbXBvcnQgc2Nob29sQXBpIGZyb20gIkAvYXBpL3NjaG9vbC5qcyI7CmltcG9ydCBtYWpvckFwaSBmcm9tICJAL2FwaS9tYWpvci5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgdmFyIHZhbGlkYXRlUGhvbmUgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgIHZhbHVlID0gdmFsdWUudHJpbSgpOwogICAgICBjb25zdCBwd2RSZWcgPSAvXigxM1swLTldfDE0WzAxNDU2ODc5XXwxNVswLTM1LTldfDE2WzI1NjddfDE3WzAtOF18MThbMC05XXwxOVswLTM1LTldKVxkezh9JC87CgogICAgICBpZiAodmFsdWUgPT09ICIiKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLor7fovpPlhaXmiYvmnLrlj7fnoIEiKSk7CiAgICAgIH0gZWxzZSBpZiAoIXB3ZFJlZy50ZXN0KHZhbHVlKSkgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi6K+36L6T5YWl5q2j56Gu55qE5omL5py65Y+356CBIikpOwogICAgICB9IGVsc2UgewogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0KICAgIH07CgogICAgdmFyIHZhbGlkYXRlSWROdW1iZXIgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgIHZhbHVlID0gdmFsdWUudHJpbSgpOwogICAgICBjb25zdCBfSURSZTE4ID0gL14oWzEtNl1bMS05XXw1MClcZHs0fSgxOHwxOXwyMClcZHsyfSgoMFsxLTldKXwxMHwxMXwxMikoKFswLTJdWzEtOV0pfDEwfDIwfDMwfDMxKVxkezN9WzAtOVh4XSQvOwogICAgICBjb25zdCBfSURyZTE1ID0gL14oWzEtNl1bMS05XXw1MClcZHs0fVxkezJ9KCgwWzEtOV0pfDEwfDExfDEyKSgoWzAtMl1bMS05XSl8MTB8MjB8MzB8MzEpXGR7M30kLzsKCiAgICAgIGlmIChfSURSZTE4LnRlc3QodmFsdWUpIHx8IF9JRHJlMTUudGVzdCh2YWx1ZSkpIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9IGVsc2UgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi6K+36L6T5YWl5q2j56Gu55qE6Lqr5Lu96K+B5Y+356CBIikpOwogICAgICB9CiAgICB9OwoKICAgIHJldHVybiB7CiAgICAgIHNldHRpbmc6IHsKICAgICAgICAvL+WOu+mZpOaWh+S7tuagjwogICAgICAgIG1lbnViYXI6IGZhbHNlLAogICAgICAgIC8v5a6a5LmJ5bel5YW35qCPCiAgICAgICAgdG9vbGJhcjogInVuZG8gcmVkbyB8IGZ1bGxzY3JlZW4gfCBmb3JtYXRzZWxlY3QgYWxpZ25sZWZ0IGFsaWduY2VudGVyIGFsaWducmlnaHQgYWxpZ25qdXN0aWZ5IHwgbGluayB1bmxpbmsgfCBudW1saXN0IGJ1bGxpc3QgfCBpbWFnZSBtZWRpYSB0YWJsZSB8IGZvbnRzZWxlY3QgZm9udHNpemVzZWxlY3QgZm9yZWNvbG9yIGJhY2tjb2xvciB8IGJvbGQgaXRhbGljIHVuZGVybGluZSBzdHJpa2V0aHJvdWdoIHwgaW5kZW50IG91dGRlbnQgfCBzdXBlcnNjcmlwdCBzdWJzY3JpcHQgfCByZW1vdmVmb3JtYXQgfCIsCiAgICAgICAgdG9vbGJhcl9kcmF3ZXI6ICJzbGlkaW5nIiwKICAgICAgICBxdWlja2JhcnNfc2VsZWN0aW9uX3Rvb2xiYXI6ICJyZW1vdmVmb3JtYXQgfCBib2xkIGl0YWxpYyB1bmRlcmxpbmUgc3RyaWtldGhyb3VnaCB8IGZvbnRzaXplc2VsZWN0IGZvcmVjb2xvciBiYWNrY29sb3IiLAogICAgICAgIC8v5bel5YW35qCP5qih5Z2XCiAgICAgICAgcGx1Z2luczogImxpbmsgaW1hZ2UgbWVkaWEgdGFibGUgbGlzdHMgZnVsbHNjcmVlbiBxdWlja2JhcnMgaW1hZ2V0b29scyIsCiAgICAgICAgbGFuZ3VhZ2U6ICJ6aF9DTiIsCiAgICAgICAgLy/mnKzlnLDljJborr7nva4KICAgICAgICBoZWlnaHQ6IDM1MAogICAgICB9LAogICAgICBiYXNlQXBpOiBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJLAogICAgICAvL+WbvueJh+S4iuS8oOWcsOWdgOaLvOaOpei/m+ihjOS7o+eQhuivt+axggogICAgICBiYXNlVXJsOiBwcm9jZXNzLmVudi5WVUVfQVBQX1NFUlZJQ0VfVVJMLAogICAgICAvLyDku6PnkIZ1cmzlnLDlnYDvvIzlsZXnpLrlm77niYfml7bmi7zmjqXkvb/nlKgKICAgICAgdXBkYXRlU3R1ZGVudDogewogICAgICAgIF9pZDogbnVsbCwKICAgICAgICBuYW1lOiAiIiwKICAgICAgICBnZW5kZXI6ICIiLAogICAgICAgIHNjaG9vbDogIiIsCiAgICAgICAgbWFqb3I6ICIiLAogICAgICAgIGdyYWRlOiAiIiwKICAgICAgICBlZHVjYXRpb246ICIiLAogICAgICAgIGRpcmVjdGlvbjogIiIsCiAgICAgICAgaWRfbnVtYmVyOiAiIiwKICAgICAgICBwaG9uZTogIiIsCiAgICAgICAgcGFyZW50OiAiIiwKICAgICAgICBwYXJlbnRfcGhvbmU6ICIiLAogICAgICAgIGFkZHJlc3M6ICIiLAogICAgICAgIHFxOiAiIiwKICAgICAgICBjbGFzczogIiIsCiAgICAgICAgYWRkbWlzc2lvbl9kYXRlOiAiIiwKICAgICAgICB0ZWFjaGVyX2lkOiAiIiwKICAgICAgICBtYW5hZ2VyX2lkOiAiIiwKICAgICAgICBwaWN0dXJlczogIiIsCiAgICAgICAgbm90ZTogIiIKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICBuYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi6K+35aGr5YaZ5aeT5ZCNIiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIGdlbmRlcjogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuivt+mAieaLqeaAp+WIqyIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XSwKICAgICAgICBkaXJlY3Rpb246IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLor7fpgInmi6nlrabkuaDmlrnlkJEiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgaWRfbnVtYmVyOiBbewogICAgICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0ZUlkTnVtYmVyLAogICAgICAgICAgdHJpZ2dlcjogWyJibHVyIiwgImNoYW5nZSJdCiAgICAgICAgfV0sCiAgICAgICAgcGhvbmU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIHZhbGlkYXRvcjogdmFsaWRhdGVQaG9uZSwKICAgICAgICAgIHRyaWdnZXI6IFsiYmx1ciIsICJjaGFuZ2UiXQogICAgICAgIH1dLAogICAgICAgIGNsYXNzOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi6K+36YCJ5oup5omA5Zyo54+t57qnIiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIHRlYWNoZXJfaWQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLor7fpgInmi6nmjojor77mlZnluIgiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgbWFuYWdlcl9pZDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuivt+mAieaLqeWtpueuoSIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XQogICAgICB9LAogICAgICB1c2VyQWxsOiBbXSwKICAgICAgZ2VuZGVyT3B0aW9uczogWy8v5oCn5YirCiAgICAgIHsKICAgICAgICB0eXBlOiAiMCIsCiAgICAgICAgbmFtZTogIueUtyIKICAgICAgfSwgewogICAgICAgIHR5cGU6ICIxIiwKICAgICAgICBuYW1lOiAi5aWzIgogICAgICB9XSwKICAgICAgZ3JhZGVPcHRpb25zOiBbLy/lubTnuqrliJfooagKICAgICAgewogICAgICAgIHR5cGU6ICIxIiwKICAgICAgICBuYW1lOiAi5aSn5LiAIgogICAgICB9LCB7CiAgICAgICAgdHlwZTogIjIiLAogICAgICAgIG5hbWU6ICLlpKfkuowiCiAgICAgIH0sIHsKICAgICAgICB0eXBlOiAiMyIsCiAgICAgICAgbmFtZTogIuWkp+S4iSIKICAgICAgfSwgewogICAgICAgIHR5cGU6ICI0IiwKICAgICAgICBuYW1lOiAi5aSn5ZubIgogICAgICB9LCB7CiAgICAgICAgdHlwZTogIjUiLAogICAgICAgIG5hbWU6ICLnoJTnqbbnlJ8iCiAgICAgIH1dLAogICAgICBlZHVjYXRpb25PcHRpb25zOiBbLy/lrabljobliJfooagKICAgICAgewogICAgICAgIHR5cGU6ICIxIiwKICAgICAgICBuYW1lOiAi5LiT56eRIgogICAgICB9LCB7CiAgICAgICAgdHlwZTogIjIiLAogICAgICAgIG5hbWU6ICLmnKznp5EiCiAgICAgIH0sIHsKICAgICAgICB0eXBlOiAiMyIsCiAgICAgICAgbmFtZTogIuehleWjqyIKICAgICAgfSwgewogICAgICAgIHR5cGU6ICI0IiwKICAgICAgICBuYW1lOiAi56S+5Lya5Lq65aOrIgogICAgICB9XSwKICAgICAgZGlyZWN0aW9uT3B0aW9uczogW3sKICAgICAgICB0eXBlOiAiMSIsCiAgICAgICAgbmFtZTogIldlYuWJjeerryIKICAgICAgfSwgewogICAgICAgIHR5cGU6ICIyIiwKICAgICAgICBuYW1lOiAiSmF2YSIKICAgICAgfSwgewogICAgICAgIHR5cGU6ICIzIiwKICAgICAgICBuYW1lOiAiVUkvVUUiCiAgICAgIH0sIHsKICAgICAgICB0eXBlOiAiNCIsCiAgICAgICAgbmFtZTogIkMvQysrIgogICAgICB9XSwKICAgICAgc2Nob29sT3B0aW9uczogW10sCiAgICAgIC8v5a2m5qCh5YiX6KGoCiAgICAgIG1ham9yT3B0aW9uczogW10sCiAgICAgIC8v5LiT5Lia5YiX6KGoCiAgICAgIGNsYXNzT3B0aW9uczogW10sCiAgICAgIC8v54+t57qn5YiX6KGoCiAgICAgIHRlYWNoZXJPcHRpb25zOiBbXSwKICAgICAgLy/mlZnluIjliJfooagKICAgICAgbWFuYWdlck9wdGlvbnM6IFtdLAogICAgICAvL+WtpueuoeWIl+ihqAogICAgICBwaWN0dXJlRGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIC8v5aSn5Zu+5piv5ZCm5pi+56S6CiAgICAgIGRpYWxvZ0ltYWdlVXJsOiAiIiwKICAgICAgLy/mmL7npLrlpKflm77lnLDlnYAKICAgICAgZGlzYWJsZWQ6IGZhbHNlLAogICAgICAvL+afpeeci+Wkp+WbviDkuIvovb0g5Yig6Zmk5oyJ6ZKu5piv5ZCm5pi+56S6CiAgICAgIGZpbGVMaXN0OiBbXSAvL+aJgOacieW3suS4iuS8oOWbvueJh+eahOaVsOe7hAoKICAgIH07CiAgfSwKCiAgY29tcG9uZW50czoge30sCgogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldENsYXNzTGlzdCgpLCB0aGlzLmdldFVzZXJMaXN0KCksIHRoaXMuZ2V0U2Nob29sTGlzdCgpLCB0aGlzLmdldE1ham9yTGlzdCgpOwogICAgdGhpcy5nZXRTdHVkZW50KCk7CiAgfSwKCiAgbWV0aG9kczogewogICAgZ2V0U3R1ZGVudCgpIHsKICAgICAgLy/moLnmja7kvKDov4fmnaXnmoTigJTigJRpZOafpeivouimgee8lui+keeahOWtpueUnwogICAgICBjb25zdCB7CiAgICAgICAgX2lkCiAgICAgIH0gPSB0aGlzLiRyb3V0ZS5wYXJhbXM7CgogICAgICBpZiAoX2lkICE9PSAiLTEiKSB7CiAgICAgICAgc3R1ZGVudEFwaS5nZXRTdHVkZW50QnlJZChfaWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgY29uc3QgcmVzcCA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgICAgaWYgKHJlc3Auc3RhdHVzID09IDApIHsKICAgICAgICAgICAgdGhpcy51cGRhdGVTdHVkZW50ID0gcmVzcC5kYXRhOwogICAgICAgICAgICBjb25zdCB7CiAgICAgICAgICAgICAgcGljdHVyZXMKICAgICAgICAgICAgfSA9IHJlc3AuZGF0YTsKCiAgICAgICAgICAgIGlmIChwaWN0dXJlcyAmJiBwaWN0dXJlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgdGhpcy5maWxlTGlzdCA9IHBpY3R1cmVzLm1hcCgoaW1nLCBpbmRleCkgPT4gKHsKICAgICAgICAgICAgICAgIG5hbWU6IGltZywKICAgICAgICAgICAgICAgIHN0YXR1czogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgdXJsOiB0aGlzLmJhc2VVcmwgKyAiL3VwbG9hZC8iICsgaW1nCiAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCgogICAgcXVlcnlTZWFyY2hTY2hvb2wocXVlcnlTdHJpbmcsIGNiKSB7CiAgICAgIHZhciBzY2hvb2xPcHRpb25zID0gdGhpcy5zY2hvb2xPcHRpb25zOwogICAgICB2YXIgcmVzdWx0cyA9IHF1ZXJ5U3RyaW5nID8gc2Nob29sT3B0aW9ucy5maWx0ZXIodGhpcy5jcmVhdGVGaWx0ZXIocXVlcnlTdHJpbmcpKSA6IHNjaG9vbE9wdGlvbnM7IC8vIOiwg+eUqCBjYWxsYmFjayDov5Tlm57lu7rorq7liJfooajnmoTmlbDmja4KCiAgICAgIGNiKHJlc3VsdHMpOwogICAgfSwKCiAgICBxdWVyeVNlYXJjaE1ham9yKHF1ZXJ5U3RyaW5nLCBjYikgewogICAgICB2YXIgbWFqb3JPcHRpb25zID0gdGhpcy5tYWpvck9wdGlvbnM7CiAgICAgIHZhciByZXN1bHRzID0gcXVlcnlTdHJpbmcgPyBtYWpvck9wdGlvbnMuZmlsdGVyKHRoaXMuY3JlYXRlRmlsdGVyKHF1ZXJ5U3RyaW5nKSkgOiBtYWpvck9wdGlvbnM7IC8vIOiwg+eUqCBjYWxsYmFjayDov5Tlm57lu7rorq7liJfooajnmoTmlbDmja4KCiAgICAgIGNiKHJlc3VsdHMpOwogICAgfSwKCiAgICBjcmVhdGVGaWx0ZXIocXVlcnlTdHJpbmcpIHsKICAgICAgcmV0dXJuIHJlc3RhdXJhbnQgPT4gewogICAgICAgIHJldHVybiByZXN0YXVyYW50LnZhbHVlLmluZGV4T2YocXVlcnlTdHJpbmcudG9Mb3dlckNhc2UoKSkgPT09IDA7CiAgICAgIH07CiAgICB9LAoKICAgIGFkZERhdGEoZm9ybU5hbWUpIHsKICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdGhpcy51cGRhdGVTdHVkZW50LnBpY3R1cmVzID0gdGhpcy5nZXRJbWdzKCk7CiAgICAgICAgICBzdHVkZW50QXBpLmFkZFN0dWRlbnQodGhpcy51cGRhdGVTdHVkZW50KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgY29uc3QgcmVzcCA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgICAgICBpZiAocmVzcC5zdGF0dXMgPT0gMCkgewogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCIvc3R1ZGVudCIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIHVwZGF0ZURhdGEoZm9ybU5hbWUpIHsKICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdGhpcy51cGRhdGVTdHVkZW50LnBpY3R1cmVzID0gdGhpcy5nZXRJbWdzKCk7CiAgICAgICAgICBzdHVkZW50QXBpLnVwZGF0ZVN0dWRlbnQodGhpcy51cGRhdGVTdHVkZW50KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgY29uc3QgcmVzcCA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgICAgICBpZiAocmVzcC5zdGF0dXMgPT0gMCkgewogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCIvc3R1ZGVudCIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIGdldFVzZXJMaXN0KCkgewogICAgICB1c2VyQXBpLmdldFVzZXJBbGwoKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBjb25zdCByZXMgPSByZXNwb25zZS5kYXRhOwoKICAgICAgICBpZiAocmVzLnN0YXR1cyA9PSAwKSB7CiAgICAgICAgICB0aGlzLnVzZXJBbGwgPSByZXMuZGF0YTsKICAgICAgICAgIHRoaXMudXNlckFsbC5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICBpZiAoaXRlbS5yb2xlX2lkID09PSAiNjJkYTBmZjQzZDMwM2I1MDFkNDA0NGNhIikgewogICAgICAgICAgICAgIHRoaXMudGVhY2hlck9wdGlvbnMucHVzaChpdGVtKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLnJvbGVfaWQgPT09ICI2MmQ2N2UyM2FjMjdiMTNhMGU4YmQyZTciIHx8ICI2MmRhMTk2OTNkMzAzYjUwMWQ0MDQ1OGEiKSB7CiAgICAgICAgICAgICAgdGhpcy5tYW5hZ2VyT3B0aW9ucy5wdXNoKGl0ZW0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICAvL+iOt+WPluaJgOacieePree6pwogICAgZ2V0Q2xhc3NMaXN0KCkgewogICAgICBjbGFzc0FwaS5nZXRDbGFzc0FsbCgpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGNvbnN0IHJlc3AgPSByZXNwb25zZS5kYXRhOwoKICAgICAgICBpZiAocmVzcC5zdGF0dXMgPT0gMCkgewogICAgICAgICAgdGhpcy5jbGFzc09wdGlvbnMgPSByZXNwLmRhdGE7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgLy/ojrflj5bmiYDmnInlrabmoKEKICAgIGdldFNjaG9vbExpc3QoKSB7CiAgICAgIHNjaG9vbEFwaS5nZXRTY2hvb2xBbGwoKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBjb25zdCByZXNwID0gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgaWYgKHJlc3Auc3RhdHVzID09IDApIHsKICAgICAgICAgIHRoaXMuc2Nob29sT3B0aW9ucyA9IHJlc3AuZGF0YTsKICAgICAgICAgIGNvbnN0IGFyciA9IHJlc3AuZGF0YTsKCiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB0aGlzLnNjaG9vbE9wdGlvbnNbaV0udmFsdWUgPSBhcnJbaV0uc2Nob29sbmFtZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICAvL+iOt+WPluaJgOacieS4k+S4mgogICAgZ2V0TWFqb3JMaXN0KCkgewogICAgICBtYWpvckFwaS5nZXRNYWpvckFsbCgpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGNvbnN0IHJlc3AgPSByZXNwb25zZS5kYXRhOwoKICAgICAgICBpZiAocmVzcC5zdGF0dXMgPT0gMCkgewogICAgICAgICAgdGhpcy5tYWpvck9wdGlvbnMgPSByZXNwLmRhdGE7CiAgICAgICAgICBjb25zdCBhcnIgPSByZXNwLmRhdGE7CgogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdGhpcy5tYWpvck9wdGlvbnNbaV0udmFsdWUgPSBhcnJbaV0ubmFtZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgY29uc29sZS5sb2coImVyciIsIGVycik7CiAgICAgIH0pOwogICAgfSwKCiAgICBoYW5kbGVSZW1vdmUoZmlsZSkgewogICAgICBzdHVkZW50QXBpLnJlcURlbGV0ZUltZyhmaWxlLm5hbWUpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGNvbnN0IHJlc3AgPSByZXNwb25zZS5kYXRhOwoKICAgICAgICBpZiAocmVzcC5zdGF0dXMgPT0gMCkgewogICAgICAgICAgLy8gdGhpcy5maWxlTGlzdC5zcGxpY2UodGhpcy5maWxlTGlzdC5pbmRleE9mKGZpbGUubmFtZSksIDEpOwogICAgICAgICAgdGhpcy5maWxlTGlzdC5zcGxpY2UodGhpcy5maWxlTGlzdC5pbmRleE9mKGZpbGUpLCAxKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICBoYW5kbGVQaWN0dXJlQ2FyZFByZXZpZXcoZmlsZSkgewogICAgICAvL+afpeeci+Wkp+WbvgogICAgICB0aGlzLmRpYWxvZ0ltYWdlVXJsID0gZmlsZS51cmw7CiAgICAgIHRoaXMucGljdHVyZURpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKCiAgICBoYW5kbGVEb3dubG9hZChmaWxlKSB7CiAgICAgIGNvbnNvbGUubG9nKGZpbGUpOwogICAgfSwKCiAgICBoYW5kbGVDaGFuZ2UoZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgaWYgKGZpbGUuc3RhdHVzID09ICJzdWNjZXNzIikgewogICAgICAgIGNvbnN0IHJlc3VsdCA9IGZpbGUucmVzcG9uc2U7CgogICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09IDApIHsKICAgICAgICAgIGNvbnN0IHsKICAgICAgICAgICAgbmFtZSwKICAgICAgICAgICAgdXJsCiAgICAgICAgICB9ID0gcmVzdWx0LmRhdGE7CiAgICAgICAgICBmaWxlID0gZmlsZUxpc3RbZmlsZUxpc3QubGVuZ3RoIC0gMV07CiAgICAgICAgICBmaWxlLm5hbWUgPSBuYW1lOwogICAgICAgICAgZmlsZS51cmwgPSB1cmw7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmZpbGVMaXN0ID0gZmlsZUxpc3Q7CiAgICB9LAoKICAgIGdldEltZ3MoKSB7CiAgICAgIHJldHVybiB0aGlzLmZpbGVMaXN0Lm1hcChmaWxlID0+IGZpbGUubmFtZSk7CiAgICB9CgogIH0KfTs="},{"version":3,"mappings":"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","names":["data","value","callback","setting","menubar","toolbar","toolbar_drawer","quickbars_selection_toolbar","plugins","language","height","baseApi","baseUrl","updateStudent","_id","name","gender","school","major","grade","education","direction","id_number","phone","parent","parent_phone","address","qq","class","addmission_date","teacher_id","manager_id","pictures","note","rules","required","message","trigger","validator","userAll","genderOptions","type","gradeOptions","educationOptions","directionOptions","schoolOptions","majorOptions","classOptions","teacherOptions","managerOptions","pictureDialogVisible","dialogImageUrl","disabled","fileList","components","mounted","methods","getStudent","studentApi","status","url","querySearchSchool","cb","querySearchMajor","createFilter","addData","updateData","getUserList","userApi","item","getClassList","classApi","getSchoolList","schoolApi","getMajorList","majorApi","getMajorAll","then","response","catch","err","console","handleRemove","handlePictureCardPreview","handleDownload","handleChange","file","getImgs"],"sourceRoot":"src/views/students","sources":["StudentUpdate.vue"],"sourcesContent":["<template>\n  <div class=\"student-update\">\n    <el-button\n      icon=\"el-icon-arrow-left\"\n      circle\n      @click=\"$router.replace('/student')\"\n    ></el-button>\n    <el-form\n      status-icon\n      ref=\"studentForm\"\n      :model=\"updateStudent\"\n      :rules=\"rules\"\n      label-width=\"100px\"\n      label-position=\"right\"\n      style=\"width: 100%; height: 100%\"\n      class=\"update-form\"\n    >\n      <div class=\"content\">\n        <div>\n          <el-form-item label=\"姓名\" prop=\"name\">\n            <el-input v-model=\"updateStudent.name\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"性别\" prop=\"gender\">\n            <el-select v-model=\"updateStudent.gender\" placeholder=\"请点击选择\">\n              <el-option\n                v-for=\"option in genderOptions\"\n                :key=\"option.type\"\n                :label=\"option.name\"\n                :value=\"option.type\"\n              ></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"学校\" prop=\"school\">\n            <el-autocomplete\n              class=\"inline-input\"\n              v-model=\"updateStudent.school\"\n              :fetch-suggestions=\"querySearchSchool\"\n              placeholder=\"请输入内容\"\n            ></el-autocomplete>\n          </el-form-item>\n          <el-form-item label=\"专业\" prop=\"major\">\n            <el-autocomplete\n              class=\"inline-input\"\n              v-model=\"updateStudent.major\"\n              :fetch-suggestions=\"querySearchMajor\"\n              placeholder=\"请输入内容\"\n            ></el-autocomplete>\n          </el-form-item>\n          <el-form-item label=\"年级\" prop=\"grade\">\n            <el-select\n              v-model=\"updateStudent.grade\"\n              placeholder=\"请点击选择\"\n              class=\"filter-item\"\n            >\n              <el-option\n                v-for=\"option in gradeOptions\"\n                :key=\"option.type\"\n                :label=\"option.name\"\n                :value=\"option.type\"\n              ></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"学历\" prop=\"education\">\n            <el-select\n              v-model=\"updateStudent.education\"\n              placeholder=\"请点击选择\"\n              class=\"filter-item\"\n            >\n              <el-option\n                v-for=\"option in educationOptions\"\n                :key=\"option.type\"\n                :label=\"option.name\"\n                :value=\"option.type\"\n              ></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"学习方向\" prop=\"direction\">\n            <el-select\n              v-model=\"updateStudent.direction\"\n              placeholder=\"请点击选择\"\n              class=\"filter-item\"\n            >\n              <el-option\n                v-for=\"option in directionOptions\"\n                :key=\"option.type\"\n                :label=\"option.name\"\n                :value=\"option.type\"\n              ></el-option>\n            </el-select>\n          </el-form-item>\n        </div>\n        <div>\n          <el-form-item label=\"身份证号\" prop=\"id_number\">\n            <el-input v-model=\"updateStudent.id_number\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"电话号码\" prop=\"phone\">\n            <el-input v-model=\"updateStudent.phone\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"家长姓名\" prop=\"parent\">\n            <el-input v-model=\"updateStudent.parent\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"家长联系电话\" prop=\"parent_phone\">\n            <el-input v-model=\"updateStudent.parent_phone\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"家庭住址\" prop=\"address\">\n            <el-input v-model=\"updateStudent.address\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"QQ\" prop=\"qq\">\n            <el-input v-model=\"updateStudent.qq\"></el-input>\n          </el-form-item>\n        </div>\n        <div>\n          <el-form-item label=\"所在班级\" prop=\"class\">\n            <el-select\n              v-model=\"updateStudent.class\"\n              placeholder=\"请点击选择\"\n              class=\"filter-item\"\n            >\n              <el-option\n                v-for=\"option in classOptions\"\n                :key=\"option._id\"\n                :label=\"option.name\"\n                :value=\"option._id\"\n              ></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"入学时间\" prop=\"addmission_date\">\n            <el-date-picker\n              v-model=\"updateStudent.addmission_date\"\n              type=\"date\"\n              placeholder=\"选择日期\"\n              value-format=\"yyyy-MM-dd\"\n            >\n            </el-date-picker>\n          </el-form-item>\n          <el-form-item label=\"教师\" prop=\"teacher_id\">\n            <el-select\n              v-model=\"updateStudent.teacher_id\"\n              placeholder=\"请点击选择\"\n              class=\"filter-item\"\n            >\n              <el-option\n                v-for=\"option in teacherOptions\"\n                :key=\"option._id\"\n                :label=\"option.name\"\n                :value=\"option._id\"\n              ></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"学管\" prop=\"manager_id\">\n            <el-select\n              v-model=\"updateStudent.manager_id\"\n              placeholder=\"请点击选择\"\n              class=\"filter-item\"\n            >\n              <el-option\n                v-for=\"option in managerOptions\"\n                :key=\"option._id\"\n                :label=\"option.name\"\n                :value=\"option._id\"\n              ></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"照片\" prop=\"pictures\">\n            <el-upload\n              :action=\"baseApi + '/manage/img/upload'\"\n              list-type=\"picture-card\"\n              :auto-upload=\"true\"\n              :file-list=\"fileList\"\n              name=\"image\"\n              accept=\"image/*\"\n              :on-change=\"handleChange\"\n            >\n              <i slot=\"default\" class=\"el-icon-plus\"></i>\n              <div slot=\"file\" slot-scope=\"{ file }\">\n                <img\n                  class=\"el-upload-list__item-thumbnail\"\n                  :src=\"file.url\"\n                  alt=\"\"\n                />\n                <span class=\"el-upload-list__item-actions\">\n                  <span\n                    class=\"el-upload-list__item-preview\"\n                    @click=\"handlePictureCardPreview(file)\"\n                  >\n                    <i class=\"el-icon-zoom-in\"></i>\n                  </span>\n                  <span\n                    v-if=\"!disabled\"\n                    class=\"el-upload-list__item-delete\"\n                    @click=\"handleDownload(file)\"\n                  >\n                    <i class=\"el-icon-download\"></i>\n                  </span>\n                  <span\n                    v-if=\"!disabled\"\n                    class=\"el-upload-list__item-delete\"\n                    @click=\"handleRemove(file)\"\n                  >\n                    <i class=\"el-icon-delete\"></i>\n                  </span>\n                </span>\n              </div>\n            </el-upload>\n            <el-dialog :visible.sync=\"pictureDialogVisible\">\n              <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\" />\n            </el-dialog>\n          </el-form-item>\n        </div>\n      </div>\n      <div>\n        <el-form-item label=\"备注信息\" prop=\"note\">\n          <vue-tinymce\n            v-model=\"updateStudent.note\"\n            :setting=\"setting\"\n          ></vue-tinymce>\n        </el-form-item>\n      </div>\n\n      <el-form-item>\n        <el-button\n          type=\"primary\"\n          @click=\"\n            updateStudent._id == null\n              ? addData('studentForm')\n              : updateData('studentForm')\n          \"\n          >确定</el-button\n        >\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport studentApi from \"@/api/student.js\";\nimport userApi from \"@/api/user.js\";\nimport classApi from \"@/api/classs.js\";\nimport schoolApi from \"@/api/school.js\";\nimport majorApi from \"@/api/major.js\";\nexport default {\n  data() {\n    var validatePhone = (rule, value, callback) => {\n      value = value.trim();\n      const pwdReg =\n        /^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\\d{8}$/;\n      if (value === \"\") {\n        callback(new Error(\"请输入手机号码\"));\n      } else if (!pwdReg.test(value)) {\n        callback(new Error(\"请输入正确的手机号码\"));\n      } else {\n        callback();\n      }\n    };\n    var validateIdNumber = (rule, value, callback) => {\n      value = value.trim();\n      const _IDRe18 =\n        /^([1-6][1-9]|50)\\d{4}(18|19|20)\\d{2}((0[1-9])|10|11|12)(([0-2][1-9])|10|20|30|31)\\d{3}[0-9Xx]$/;\n      const _IDre15 =\n        /^([1-6][1-9]|50)\\d{4}\\d{2}((0[1-9])|10|11|12)(([0-2][1-9])|10|20|30|31)\\d{3}$/;\n      if (_IDRe18.test(value) || _IDre15.test(value)) {\n        callback();\n      } else {\n        callback(new Error(\"请输入正确的身份证号码\"));\n      }\n    };\n    return {\n      setting: {\n        //去除文件栏\n        menubar: false,\n        //定义工具栏\n        toolbar:\n          \"undo redo | fullscreen | formatselect alignleft aligncenter alignright alignjustify | link unlink | numlist bullist | image media table | fontselect fontsizeselect forecolor backcolor | bold italic underline strikethrough | indent outdent | superscript subscript | removeformat |\",\n        toolbar_drawer: \"sliding\",\n        quickbars_selection_toolbar:\n          \"removeformat | bold italic underline strikethrough | fontsizeselect forecolor backcolor\",\n        //工具栏模块\n        plugins: \"link image media table lists fullscreen quickbars imagetools\",\n        language: \"zh_CN\", //本地化设置\n        height: 350,\n      },\n      baseApi: process.env.VUE_APP_BASE_API, //图片上传地址拼接进行代理请求\n      baseUrl: process.env.VUE_APP_SERVICE_URL, // 代理url地址，展示图片时拼接使用\n      updateStudent: {\n        _id: null,\n        name: \"\",\n        gender: \"\",\n        school: \"\",\n        major: \"\",\n        grade: \"\",\n        education: \"\",\n        direction: \"\",\n        id_number: \"\",\n        phone: \"\",\n        parent: \"\",\n        parent_phone: \"\",\n        address: \"\",\n        qq: \"\",\n        class: \"\",\n        addmission_date: \"\",\n        teacher_id: \"\",\n        manager_id: \"\",\n        pictures: \"\",\n        note: \"\",\n      },\n      rules: {\n        name: [{ required: true, message: \"请填写姓名\", trigger: \"blur\" }],\n        gender: [{ required: true, message: \"请选择性别\", trigger: \"blur\" }],\n        direction: [\n          { required: true, message: \"请选择学习方向\", trigger: \"blur\" },\n        ],\n        id_number: [\n          { validator: validateIdNumber, trigger: [\"blur\", \"change\"] },\n        ],\n        phone: [\n          {\n            required: true,\n            validator: validatePhone,\n            trigger: [\"blur\", \"change\"],\n          },\n        ],\n        class: [{ required: true, message: \"请选择所在班级\", trigger: \"blur\" }],\n        teacher_id: [\n          { required: true, message: \"请选择授课教师\", trigger: \"blur\" },\n        ],\n        manager_id: [\n          { required: true, message: \"请选择学管\", trigger: \"blur\" },\n        ],\n      },\n      userAll: [],\n      genderOptions: [\n        //性别\n        { type: \"0\", name: \"男\" },\n        { type: \"1\", name: \"女\" },\n      ],\n      gradeOptions: [\n        //年纪列表\n        { type: \"1\", name: \"大一\" },\n        { type: \"2\", name: \"大二\" },\n        { type: \"3\", name: \"大三\" },\n        { type: \"4\", name: \"大四\" },\n        { type: \"5\", name: \"研究生\" },\n      ],\n      educationOptions: [\n        //学历列表\n        { type: \"1\", name: \"专科\" },\n        { type: \"2\", name: \"本科\" },\n        { type: \"3\", name: \"硕士\" },\n        { type: \"4\", name: \"社会人士\" },\n      ],\n      directionOptions: [\n        { type: \"1\", name: \"Web前端\" },\n        { type: \"2\", name: \"Java\" },\n        { type: \"3\", name: \"UI/UE\" },\n        { type: \"4\", name: \"C/C++\" },\n      ],\n      schoolOptions: [], //学校列表\n      majorOptions: [], //专业列表\n      classOptions: [], //班级列表\n      teacherOptions: [], //教师列表\n      managerOptions: [], //学管列表\n      pictureDialogVisible: false, //大图是否显示\n      dialogImageUrl: \"\", //显示大图地址\n      disabled: false, //查看大图 下载 删除按钮是否显示\n      fileList: [], //所有已上传图片的数组\n    };\n  },\n\n  components: {},\n  mounted() {\n    this.getClassList(),\n      this.getUserList(),\n      this.getSchoolList(),\n      this.getMajorList();\n      this.getStudent()\n  },\n  methods: {\n    getStudent() {\n      //根据传过来的——id查询要编辑的学生\n      const { _id } = this.$route.params;\n      if (_id !== \"-1\") {\n        studentApi.getStudentById(_id).then((response) => {\n          const resp = response.data;\n          if (resp.status == 0) {\n            this.updateStudent = resp.data;\n            const { pictures } = resp.data;\n            if (pictures && pictures.length > 0) {\n              this.fileList= pictures.map((img,index)=>({\n                name:img,\n                status:\"success\",\n                url:this.baseUrl + \"/upload/\" +img \n              }))\n            }\n          }\n        });\n      }\n    },\n    querySearchSchool(queryString, cb) {\n      var schoolOptions = this.schoolOptions;\n      var results = queryString\n        ? schoolOptions.filter(this.createFilter(queryString))\n        : schoolOptions;\n      // 调用 callback 返回建议列表的数据\n      cb(results);\n    },\n    querySearchMajor(queryString, cb) {\n      var majorOptions = this.majorOptions;\n      var results = queryString\n        ? majorOptions.filter(this.createFilter(queryString))\n        : majorOptions;\n      // 调用 callback 返回建议列表的数据\n      cb(results);\n    },\n    createFilter(queryString) {\n      return (restaurant) => {\n        return restaurant.value.indexOf(queryString.toLowerCase()) === 0;\n      };\n    },\n    addData(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.updateStudent.pictures = this.getImgs();\n          studentApi.addStudent(this.updateStudent).then((response) => {\n            const resp = response.data;\n            if (resp.status == 0) {\n              this.$router.replace(\"/student\");\n            }\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    updateData(formName) {\n        this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.updateStudent.pictures = this.getImgs();\n          studentApi.updateStudent(this.updateStudent).then((response) => {\n            const resp = response.data;\n            if (resp.status == 0) {\n              this.$router.replace(\"/student\");\n            }\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    getUserList() {\n      userApi.getUserAll().then((response) => {\n        const res = response.data;\n        if (res.status == 0) {\n          this.userAll = res.data;\n          this.userAll.forEach((item) => {\n            if (item.role_id === \"62da0ff43d303b501d4044ca\") {\n              this.teacherOptions.push(item);\n            } else if (\n              item.role_id === \"62d67e23ac27b13a0e8bd2e7\" ||\n              \"62da19693d303b501d40458a\"\n            ) {\n              this.managerOptions.push(item);\n            }\n          });\n        }\n      });\n    },\n    //获取所有班级\n    getClassList() {\n      classApi.getClassAll().then((response) => {\n        const resp = response.data;\n        if (resp.status == 0) {\n          this.classOptions = resp.data;\n        }\n      });\n    },\n    //获取所有学校\n    getSchoolList() {\n      schoolApi.getSchoolAll().then((response) => {\n        const resp = response.data;\n        if (resp.status == 0) {\n          this.schoolOptions = resp.data;\n          const arr = resp.data;\n          for (let i = 0; i < arr.length; i++) {\n            this.schoolOptions[i].value = arr[i].schoolname;\n          }\n        }\n      });\n    },\n    //获取所有专业\n    getMajorList() {\n      majorApi\n        .getMajorAll()\n        .then((response) => {\n          const resp = response.data;\n          if (resp.status == 0) {\n            this.majorOptions = resp.data;\n            const arr = resp.data;\n            for (let i = 0; i < arr.length; i++) {\n              this.majorOptions[i].value = arr[i].name;\n            }\n          }\n        })\n        .catch((err) => {\n          console.log(\"err\", err);\n        });\n    },\n    handleRemove(file) {\n      studentApi.reqDeleteImg(file.name).then((response) => {\n        const resp = response.data;\n        if (resp.status == 0) {\n          // this.fileList.splice(this.fileList.indexOf(file.name), 1);\n          this.fileList.splice(this.fileList.indexOf(file), 1);\n        }\n      });\n    },\n    handlePictureCardPreview(file) {\n      //查看大图\n      this.dialogImageUrl = file.url;\n      this.pictureDialogVisible = true;\n    },\n    handleDownload(file) {\n      console.log(file);\n    },\n    handleChange(file, fileList) {\n      if (file.status == \"success\") {\n        const result = file.response;\n        if (result.status == 0) {\n          const { name, url } = result.data;\n          file = fileList[fileList.length - 1];\n          file.name = name;\n          file.url = url;\n        }\n      }\n      this.fileList = fileList;\n    },\n    getImgs() {\n      return this.fileList.map((file) => file.name);\n    },\n    \n  },\n};\n</script>\n\n<style scoped>\n.content {\n  display: flex;\n  justify-content: space-around;\n}\n.el-input {\n  width: 190px;\n}\n</style>"]}]}