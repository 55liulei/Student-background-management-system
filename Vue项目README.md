# 个人技能
html/css html结构h5新增内容（本地存储，智能表单之类），css盒子模型，flex布局，less/sass rem 各种选择器，布局方面，过渡，2D/3D变化，css动画等等
js 数据类型，语法语句，内置API，正则，原型和原型链，闭包，作用域，面向对象等等
nodejs 模块化，各种框架，服务方面，mongodb数据库存储使用方式
ES6 新增的数据类型（Symbol,核心的扩展方法，数组和对象新增的API）Proxy代理和Rfelect反射方面，最重要的要体现对异步的理解，Promise的理解，async/awit和then的区别，iterator和Generator的理解，CommonJs和ES6中Module模块化的区别
ajax 原生ajax的使用步骤，各种类库的使用（fetch和axios）同源策略和跨域的解决方式
vue 双向数据绑定的原理，内置指令的使用，函数和计算属性还监听器的区别，组件间通信方式，Vue-Router的使用和传参方式

突出当前前端主要关注点和学习能力

# 项目
## 项目描述
    是基于vue2.6.11的学员管理系统，该项目为针对学校学生、教师、专业进行同一管理的后台管理使用平台，因为学生比较多而且分数的班级和授课教师及学管比较杂，不方便信息查询及管理，所以将所有学生及教师等集中到一个平台上方便快速查询学员信息
## 技术选型：分阶段
    前台数据展示
    后端应用
    前后的交互
    模块化
    项目构建


    vue 省去复杂的节点查询，实现双向数据绑定，降低页面维护难度
    VueDevTools 路由方面的信息，组件中的数据，vuex中状态
    VueRoter 配置路由链接进行组件展示切换，配置子路由，路由传递参数，路由守卫拦截用户登录状态
    VueLoader 打包.vue单文件组件
    VueCli 搭建项目基本环境
    Vuex user信息统一管理
    npm 安装各种依赖
    vscode  开发调试工具
    axios 手动封装，配置了拦截器（主要用于loading效果开启和关闭，全局异常消息提示）
    ES6  let、const、箭头函数、Promise
    Webpack 资源打包
    Element-ui  Dropdown下拉菜单、NavMenu导航菜单、Table表格、Pagination分页、Form表单（行内表单、数据校验/自定义校验规则、重置）、dialog对话框、DatePicker日期选择器、Loading加载效果、Message消息提示、upload图片上传
    Babel 将ES6语法代码转换成ES5防止浏览器不识别
    Eslint 代码格式监测及格式化
    Nodejs和express 后端服务接口搭建
    mongodb/mongoose 数据库、表创建以及对数据的增删改查
    vue-tinymce 富文本编辑框

## 项目中采用RESful架构风格
    通过HTTP请求方式（get/post/put/delete）来区分对资源个CURD操作
    请求资源url是 /资源名称/资源标识



# 项目开发流程
项目工程目录
api Ajax相关请求方法
assett 公共资源
components 非路由组件
router 前端路由配置文件
utils 工具模块
views 路由组件
App.vue  根组件
main.js 入口js文件

## 配置不同环境常量
开发环境 .env.development 
生成环境 .env.production

vue.config.js中配置代理选项

## 搭建后端服务步骤
1.初始化package.json文件  npm init
2.安装所需插件
3.app.js文件（整个后端应用的启动文件，这个文件里面主要配置中间件，开发路径，连接数据库，启动服务，配置端口号）
4.创建路由器文件（配置各种路径）
5.app.js中引入路由器文件，通过postman测试是否可以成功连接
6.创建用户模块文件（数据库中的表）配置各种字段信息
7.在路由器文件中配置登录接口
8.前端访问登录接口测试

## 前后端交互（跨域）
proxy代理：由于后端没有进程cors解决跨域，所以需要前端解决，利用方式：在vue.config.js中配置devServer中的proxy字段配置代理解决跨域，设计到不同环境常量定义
jsonp：由于后端没有提供获取添加的接口，所以查询网络接口，使用的是jsonp方式进行跨域查询，使用方式：通过 npm install jsonp 调用jsonp方法 参数1：请求地址，参数2：配置项，参数3：回调函数

## 动态渲染组件中模板元素
前提：当前系统中左侧导航栏中使用的导航菜单中的菜单项是由当前登录的用户权限决定的，所以需要动态渲染，采用render方式进行渲染
然后通过createElement动态创建DOM元素，但是渲染函数由时候写起来非常麻烦尤其层数比较多的时候，这个可以选择使用JSX语法
在vue中使用jsx语法方式，需要Babel插件，
1，安装依赖npm install @vue/babel-preset-jsx @vue/babel-helper-vue-jsx-merge-props
2.配置babelrc文件
    module.exports = {
         presets: [
           '@vue/cli-plugin-babel/preset',
           ['@vue/babel-preset-jsx',
             {
               'injectH': false
             }]
        ]
    }
## 添加/编辑用户的时候点击确定按钮需要区分
说明：这两个功能同时使用的一个按钮，需要在点击的时候进行判断，判断更新对象中的_id属性是否为null，如果null则进行添加否则进行编辑

## js中校验表单方法
由于页面中可能会多个表单，所以首先需要获取到这个表单元素（DOM元素），由于vue中是无DOM操作的，只操作数据对应的页面就会进行更新展示，所以在一些特殊的情况下需要获取到DOM元素，在DOM页面通过ref属性给当前这个元素起个名字，然后在js中通过this.$refs[对应DOM元素的ref属性值]方式获取

## 前后的对接流程
1.后端创建对应的Model文件，连接数据库
2.routers/index.js中添加对应的接口
3.前端api文件夹中创建对应的js文件，里面添加通过自己封装的axios对象发送ajax请求
4.对应的组件中调用api方法获取数据并在DOM页面中进行展示

## 图片上传
1.后端搭建文件上传接口(file-upload.js) 并且在根目录下创建public/upload文件夹，安装multer插件
2.前端使用elementui中的Upload上传里面的照片墙
    action 上传图片的接口地址
    accept 接受文件文件
    name 请求参数名
    list-type 选择使用卡片样式
    file-list 所有已上传的图片数组
    on-change 文件状态改变时的钩子，添加文件，上传成功和上传失败的时候都会自动调用
        这个方法会接口2个参数，参数1：file：代表当前选择的图片（有status这个状态：success成功，ready准备上传，fail：失败），fileList：照片墙数组
        当上传成功后需要将当前图片文件的name和url更改为后端返回的对应的值，修改完毕之后更新data中fileList

# 项目中遇到的问题

## 为角色添加权限时候，选择一级树形节点后再选择一个2个节点，会将最后一个1级节点删除掉
原因：在树形控件节点选中回调函数中的判断如果取消勾选会从树形控件选中项数组中删除元素，由于选择2个控件时，会触发他的父级控件取消勾选，所以进入到判断内从数组中删除元素，删除操作是获取对应树形控件的index属性所对应的数组中的索引（idnexOf），如果找不到会返回-1，利用数组的splice方法进行删除，所以如果参数1传入的是-1，那么代表从倒数第几个开始删除
解决方式：删除之前先判断如果要删除的元素的索引存在（不是-1）再进行删除

## 更换角色设置权限时，还是显示上一个
原因：auth组件中mounted方法只调用一次，关闭弹窗再次打开并不会进入mounted方法，也就是不会更新要编辑的角色对象
解决方式：通过watch监听器监视父组件中选择的角色对象，一旦发生变化就更新角色对象和树形控件中的选中项数组重新赋值，并且更新界面中树形控件展示内容this.$refs['tree'].setCheckedKeys(this.checkedKeys)

## 为角色设置权限的时候，取消勾选后，数组中没有删除掉导致数组中会出现多个重复选项
原因：当树形控件取消勾选时，dom页面虽然已经取消勾选，但是数组中并没有及时删除调用
解决方式：通过ES6中为数组去重，通过this.$nextTick方法当页面加载完毕之后进行删除

## 删除用户后显示列表BUG
描述：当前用户总数量为6条，每页显示5条数据，当前页面为第2页，此时删除最后一条数据后本应该显示第1页数据（前5条）但是当前页码为2，而数据库中只有5条数据，所以列表为空
解决方式：在data中添加一个属性(totalPage)记录总页数，在请求列表数据后为其赋值为总条数/每页需要展示条数，当删除一条数据后重新计算它的值，在每一次发送请求前判断如果当前页码大于了总页码就让当前页码等于总页码

## 照片上传时，上传2张，点击删除第1张时，其实删除的是第2张（只是前端fileList数组，后端删除的是对的）
原因：从fileList中删除的时候通过图片名称（字符串）去查询在fileList中的索引，但是filetList中的每个元素是对象，所以返回的索引为-1
解决方式：将查询索引是使用的file.name换成file即可

## 学员条件查询时，输入不存在的教师时，会返回全部数据
原因：输入教师名称后会根据名字到用户列表中查询对应的_id，如果教师姓名不存在会赋值为空字符串，查询条件对象中判断如果为空字符串，则obj对象为空对象，根据obj进行查询时如果是空对象则会返回数据库中所有数据
解决方式：如果根据教师姓名在用户列表中没有查询到则查询条件对象中教师id赋值为-1（代表要根据教师进行查询，但是教师的id为不存在的）

# 项目收获
1. 熟悉一个项目的开发流程
2. 学会模块化、 组件化、 工程化的开发模式
3. 掌握使用 VueCli 脚手架初始化 Vue项目开发
4. 学会使用 node+express+mongoose+mongodb 搭建后台应用

